(this.webpackJsonpbulindutestu=this.webpackJsonpbulindutestu||[]).push([[0],{165:function(t,e,a){},166:function(t,e,a){},185:function(t,e,a){"use strict";a.r(e);var s=a(1),i=a(0),n=a.n(i),r=a(62),l=a.n(r),o=(a(165),a(166),a(167),a(27)),c=a(32),d=a(23),h=a(35),u=a(34),j=a(215),m=a(213),b=a(206),p=a(44),g=a(203),O=a(186),f=a(214),x=a(204),y=a(205),v=a(201),C=a(91),k=a(208),S=a(37),w=a(210),D=a(207),I=a(146),M=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).startGame=function(){console.log("startGame"),s.state.username&&""!==s.state.username&&s.state.gameType&&""!==s.state.gameType?(console.log("gotUsername"),s.setState({formError:!1}),fetch("http://localhost:3001/game",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({host:s.state.username,gameType:s.state.gameType})}).then((function(t){return t.json()})).then((function(t){if(t.body){var e=JSON.parse(t.body);console.log(e),s.props.stateHandler.setUsername(s.state.username),s.props.stateHandler.setGameData(e),s.setState({waitModal:!0})}}),(function(t){console.error(t.message)}))):s.setState({formError:!0})},s.joinGame=function(){console.log("joinGame"),s.state.username&&""!==s.state.username&&s.state.joinGameId&&""!==s.state.joinGameId?(console.log("sending patch"),s.setState({formError:!1}),fetch("http://localhost:3001/game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.state.joinGameId,username:s.state.username})}).then((function(t){return t.json()})).then((function(t){if(t.body){var e=JSON.parse(t.body);console.log(e),s.props.stateHandler.setUsername(s.state.username),s.props.stateHandler.setGameData(e),s.setState({waitModal:!0})}}),(function(t){console.error(t.message)}))):s.setState({formError:!0})},s.setPlayerReady=function(){s.state.username&&""!==s.state.username&&s.props.game.id&&fetch("http://localhost:3001/game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.state.username,status:"ready"})}).then((function(t){return t.json()})).then((function(t){console.log(t);var e=JSON.parse(t.body);e.players&&s.props.stateHandler.setPlayers(e.players)}))},s.checkPlayerStatus=function(){setTimeout((function(){fetch("http://localhost:3001/game",{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.state.username,status:"ready"})}).then((function(t){return t.json()})).then((function(t){console.log(t);var e=JSON.parse(t.body);e.players&&s.props.stateHandler.setPlayers(e.players)}))}),1e3)},s.handleChange=function(t){s.setState(Object(S.a)({},t.target.name,t.target.value))},s.closeOnDimmerClickHandle=function(t){s.setState({joinModal:!1})},s.state={username:"",gameType:"",usernameError:!1,joinGameId:"",joinModal:!1,waitModal:!1},s}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(f.a,{as:"h1",textAlign:"center",children:"Welcome to my blind-testing app."}),Object(s.jsxs)("p",{children:["This app is made to let you be in charge of the game. Add your own music, your own clips, set your parameters and enjoy with your friends.",Object(s.jsx)("br",{}),"Choose a game mode with the buttons below :"]}),Object(s.jsxs)(y.a,{size:"massive",error:this.state.formError,style:{width:"100%"},children:[Object(s.jsx)(y.a.Field,{inline:!0,children:Object(s.jsx)(v.a,{fluid:!0,name:"username",label:"Username",value:this.state.username,onChange:this.handleChange})}),Object(s.jsx)(m.a,{basic:!0,textAlign:"center",style:T.noPaddingX,children:Object(s.jsxs)(O.a.Group,{vertical:!0,style:{width:"100%"},children:[Object(s.jsx)(x.a,{content:"Play a solo game and score as much points as you can. Share your seed to challenge your friends on the same items.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:T.homeButtons,active:"solo"===this.state.gameType,size:"massive",onClick:function(e){t.setState({gameType:"solo"})},children:"Solo"})}),Object(s.jsx)(x.a,{content:"Play online with your friends in a private lobby. All player in the lobby will get the same song at the same time.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:T.homeButtons,active:"lobby"===this.state.gameType,size:"massive",onClick:function(e){t.setState({gameType:"lobby"})},children:"Lobby"})}),Object(s.jsx)(x.a,{content:"Play with your friends on the couch. Each player can use its cellphone as a buzzer.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:T.homeButtons,active:"couch"===this.state.gameType,size:"massive",onClick:function(e){t.setState({gameType:"couch"})},children:"Couch"})}),Object(s.jsx)(x.a,{content:"Input a seed to join an existing game.",position:"top center",trigger:Object(s.jsx)(O.a,{style:T.homeButtons,onClick:function(){return t.setState({joinModal:!0})},size:"massive",children:"Join"})})]})}),Object(s.jsx)(y.a.Button,{fluid:!0,size:"massive",style:T.homeButtons,onClick:this.startGame,children:"Let's Go !"}),Object(s.jsx)(w.a,{error:!0,header:"Invalid fields",content:"Please enter a username and select a type of game."})]}),Object(s.jsxs)(D.a,{open:this.state.joinModal,closeOnDimmerClick:!0,onClose:function(){t.setState({joinModal:!1})},children:[Object(s.jsx)(D.a.Header,{children:"Join a game"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsxs)(D.a.Description,{children:[Object(s.jsx)(f.a,{children:"Join an ongoing game with your friends"}),Object(s.jsx)("p",{children:"Enter the id of the game and your username then press the join button"}),Object(s.jsxs)(y.a,{error:this.state.formError,children:[Object(s.jsx)(y.a.Input,{name:"joinGameId",label:"Game ID",value:this.state.joinGameId,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{nmae:"username",label:"Username",value:this.state.username,onChange:this.handleChange})]})]})}),Object(s.jsxs)(D.a.Actions,{children:[Object(s.jsx)(O.a,{color:"black",onClick:function(){return t.setState({joinModal:!1})},children:"Cancel"}),Object(s.jsx)(O.a,{content:"Join",labelPosition:"right",icon:"checkmark",onClick:this.joinGame,positive:!0})]})]}),Object(s.jsxs)(D.a,{open:this.state.waitModal,closeOnDimmerClick:!1,onClose:function(){t.setState({waitModal:!1})},children:[Object(s.jsx)(D.a.Header,{children:"Waiting for players"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsxs)(D.a.Description,{children:[Object(s.jsxs)(f.a,{children:[Object(s.jsx)(p.a,{loading:!0,name:"spinner"})," Waiting for other players to join the game"]}),Object(s.jsxs)(C.a,{as:"a",color:"teal",image:!0,children:[Object(s.jsx)(p.a,{name:"id card outline"}),"Game ID",this.props.game&&Object(s.jsxs)(C.a.Detail,{onClick:function(){navigator.clipboard.writeText(t.props.game.id)},children:[this.props.game.id," (click to copy)"]})]}),this.props.game?Object(s.jsx)(k.a,{children:Object.entries(this.props.game.players).map((function(e){return Object(s.jsxs)(k.a.Item,{children:[Object(s.jsx)(k.a.Icon,{name:e[0]===t.props.game.host?"user secret":"user"}),Object(s.jsxs)(k.a.Content,{children:[e[0]," ","ready"===e[1].status&&Object(s.jsx)(p.a,{color:"green",name:"check"})]})]})}))}):Object(s.jsxs)("p",{children:[Object(s.jsx)(p.a,{loading:!0,name:"spinner"})," Waiting for game data."]})]})}),Object(s.jsxs)(D.a.Actions,{children:[Object(s.jsx)(O.a,{color:"red",children:"Leave"}),this.props.game&&(this.props.game.host===this.state.username?Object(s.jsx)(O.a,{content:"Launch",labelPosition:"right",disabled:I.a.countBy(Object.entries(this.props.game.players).map((function(t){return t[1].status})),(function(t){return t})).ready!==Object.entries(this.props.game.players).length,children:"Launch"}):"ready"!==this.props.game.players[this.state.username].status?Object(s.jsx)(O.a,{content:"Ready",labelPosition:"right",icon:"checkmark",onClick:this.setPlayerReady,positive:!0}):Object(s.jsxs)(O.a,{content:"Waiting",labelPosition:"right",disabled:!0,children:[Object(s.jsx)(p.a,{loading:!0,name:"spinner"})," Waiting"]}))]})]})]})}}]),a}(n.a.Component),T={homeButtons:{fontSize:"3rem",lineHeight:"0"},noPaddingX:{paddingLeft:"0",paddingRight:"0"}},P=M,A=a(115),F=a(211),z=a(202),G=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).opts={width:"100%",playerVars:{autoplay:0,controls:0,showinfo:0}},s.player=null,s._onReady=function(t){console.log("_onReady"),s.setState({ytplayer:t.target}),t.target.seekTo(s.state.data.from,!0),t.target.playVideo()},s._onStateChange=function(t){switch(console.log("_onStateChange"),console.log("Youtube player state: "+t.data),t.data){case 1:s.startRound();break;case 3:case 5:t.target.seekTo(s.state.data.from,!0),t.target.playVideo()}},s.selectData=function(){console.log("selectData"),console.log(s.props.allData.allData);var t=null,e=s.props.allData.allData;if(-1!==e.map((function(t){return t.done})).indexOf(!1)){for(;null===t||!0===t.done;)t=e[Math.floor(Math.random()*e.length)];s.setState({data:t,timer:t.time,answerTimer:t.answerTime,loading:!0,start:!1}),s.props.allData.allData[s.props.allData.allData.indexOf(t)].done=!0}else s.setState({modalError:!0})},s.prepareNextRound=function(){console.log("prepareNextRound"),s.selectData(),s.setState({visible:!1,fields:{title:"",titleMatch:!1,artist:"",artistMatch:!1},checked:!1})},s.startRound=function(){console.log("startRound"),s.setState({start:!0,loading:!1});var t=setInterval((function(){s.state.timer<=0&&s.state.ytplayer.pauseVideo(),s.state.answerTimer<=0?(clearInterval(t),s.endRound()):!1===s.state.start?clearInterval(t):s.setState({timer:s.state.timer-1,answerTimer:s.state.answerTimer-1})}),1e3)},s.endRound=function(){s.setState({start:!1,visible:!0})},s.checkValues=function(){console.log(s.state.fields);var t="artist"in s.state.data===!1||s.state.fields.artist.toLowerCase()===s.state.data.artist.toLowerCase(),e="title"in s.state.data===!1||s.state.fields.title.toLowerCase()===s.state.data.title.toLowerCase(),a="origin"in s.state.data===!1||s.state.fields.origin.toLowerCase()===s.state.data.origin.toLowerCase(),i={artist:s.state.fields.artist,artistMatch:t,title:s.state.fields.title,titleMatch:e,origin:s.state.fields.origin,originMatch:a};s.setState({checked:!0,fields:i},s.postCheck)},s.postCheck=function(){s.state.fields.artistMatch&&s.state.fields.titleMatch&&s.state.fields.originMatch&&s.setState({modal:!0})},s.handleChange=function(t){console.log("handleChange");var e=t.target.value,a=s.state.fields;a=Object(o.a)(Object(o.a)({},a),{},Object(S.a)({},t.target.name,e)),console.log(a),s.setState({fields:a})},s.state={visible:!1,data:null,timer:0,answerTimer:0,fields:{title:"",titleMatch:!1,artist:"",artistMatch:!1,origin:"",originMatch:""},checked:!1,start:!1,ytplayer:null,loading:!1,modal:!1,modalError:!1},s}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(f.a,{as:"h3",children:"Video"}),Object(s.jsxs)(m.a,{basic:!0,children:[Object(s.jsx)(O.a,{secondary:!0,onClick:function(e){return t.setState({visible:!t.state.visible})},children:"Reveal"}),null===this.state.data&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.prepareNextRound,disabled:this.state.loading,children:"Start"}),null!==this.state.data&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.prepareNextRound,disabled:this.state.loading,children:"Next"}),Object(s.jsxs)(m.a,{textAlign:"center",children:[null!=this.state.data&&Object(s.jsx)(F.a,{progress:"value",indicating:!0,value:this.state.answerTimer,total:this.state.data.answerTime}),this.state.loading&&Object(s.jsx)(z.a,{active:!0}),Object(s.jsxs)(m.a,{basic:!0,children:[null!=this.state.data&&!1===this.state.visible&&Object(s.jsx)("div",{style:{height:"70px",width:"calc(100% - 2em)",backgroundColor:"black",position:"absolute",top:"1em"}}),null!=this.state.data&&Object(s.jsx)(A.a,{name:"ytplayer",videoId:null===this.state.data?"dummy":this.state.data.id,opts:this.opts,onReady:this._onReady,onStateChange:this._onStateChange,style:{position:"absolute",top:"0",zIndex:"10"}})]})]}),Object(s.jsxs)(y.a,{children:[Object(s.jsxs)(y.a.Group,{widths:"equal",children:[null!=this.state.data&&null!=this.state.data.title&&Object(s.jsx)(y.a.Input,{fluid:!0,name:"title",label:"Title",placeholder:"Title",value:this.state.fields.title,onChange:this.handleChange,error:!this.state.fields.titleMatch&&this.state.checked,disabled:this.state.fields.titleMatch&&this.state.checked}),null!=this.state.data&&null!=this.state.data.artist&&Object(s.jsx)(y.a.Input,{fluid:!0,name:"artist",label:"Artist",placeholder:"Artist",value:this.state.fields.artist,onChange:this.handleChange,error:!this.state.fields.artistMatch&&this.state.checked,disabled:this.state.fields.artistMatch&&this.state.checked}),null!=this.state.data&&null!=this.state.data.origin&&Object(s.jsx)(y.a.Input,{fluid:!0,name:"origin",label:"Origin",placeholder:"Origin",value:this.state.fields.origin,onChange:this.handleChange,error:!this.state.fields.originMatch&&this.state.checked,disabled:this.state.fields.originMatch&&this.state.checked})]}),Object(s.jsx)(y.a.Button,{onClick:this.checkValues,disabled:!this.state.start,children:"Check"})]})]}),Object(s.jsxs)(D.a,{onClose:function(){return t.setState({modal:!1})},onOpen:function(){return t.setState({modal:!0})},open:this.state.modal,children:[Object(s.jsx)(D.a.Header,{children:"Congratulations"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsx)(D.a.Description,{children:Object(s.jsx)(f.a,{children:"You have successfully found all the fields for this question !"})})}),Object(s.jsx)(D.a.Actions,{children:Object(s.jsx)(O.a,{content:"Got it !",labelPosition:"right",icon:"checkmark",onClick:function(){return t.setState({modal:!1})},positive:!0})})]}),Object(s.jsxs)(D.a,{onClose:function(){return t.setState({modalError:!1})},onOpen:function(){return t.setState({modalError:!0})},open:this.state.modalError,children:[Object(s.jsx)(D.a.Header,{children:"That's all folks"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsx)(D.a.Description,{children:Object(s.jsx)(f.a,{children:"Sorry but you have done all the items of this category, try addind some more to keep playing"})})}),Object(s.jsx)(D.a.Actions,{children:Object(s.jsx)(O.a,{content:"Okay",labelPosition:"right",icon:"close",onClick:function(){return t.setState({modalError:!1})},negative:!0})})]})]})}}]),a}(n.a.Component),R=a(124),H=a.n(R),B=a(43),E=a.n(B),N=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).opts={width:"100%",playerVars:{autoplay:0,controls:0,showinfo:0}},s.player=null,s._onReady=function(t){console.log("_onReady"),s.setState({ytplayer:t.target}),t.target.seekTo(s.state.data.from,!0),t.target.playVideo()},s._onStateChange=function(t){switch(console.log("_onStateChange"),console.log("Youtube player state: "+t.data),t.data){case 1:s.startRound();break;case 3:case 5:t.target.seekTo(s.state.data.from,!0),t.target.playVideo()}},s.selectData=function(){console.log("selectData"),console.log(s.props.allData.allData);var t=null,e=s.props.allData.allData;if(-1!==e.map((function(t){return t.done})).indexOf(!1)){for(;null===t||!0===t.done;)t=e[Math.floor(Math.random()*e.length)];s.setState({data:t,timer:t.time,answerTimer:t.answerTime,loading:!0,start:!1}),s.props.allData.allData[s.props.allData.allData.indexOf(t)].done=!0}else s.setState({modalError:!0})},s.prepareNextRound=function(){console.log("prepareNextRound"),s.selectData(),s.setState({visible:!1,match:{title:"",titleMatch:!1,artist:"",artistMatch:!1},checked:!1})},s.startRound=function(){console.log("startRound"),s.setState({start:!0,loading:!1});var t=setInterval((function(){s.state.timer<=0&&s.state.ytplayer.pauseVideo(),s.state.answerTimer<=0?(clearInterval(t),s.endRound()):!1===s.state.start?clearInterval(t):s.setState({timer:s.state.timer-1,answerTimer:s.state.answerTimer-1})}),1e3)},s.endRound=function(){s.setState({start:!1,visible:!0}),s.state.match.artistMatch&&s.state.match.titleMatch&&s.state.match.originMatch||s.setState({modal:!0})},s.checkValues=function(){console.log(s.state.fields),null!=s.state.data.title&&null!=s.state.fields.title&&(console.log("jaro-winkler title: "+E()(s.reduceField(s.state.data.title),s.reduceField(s.state.fields.title))),console.log("levenshtein title: "+H()(s.reduceField(s.state.data.title),s.reduceField(s.state.fields.title)))),null!=s.state.data.artist&&null!=s.state.fields.artist&&(console.log("jaro-winkler artist: "+E()(s.reduceField(s.state.data.artist),s.reduceField(s.state.fields.artist))),console.log("levenshtein artist: "+H()(s.reduceField(s.state.data.artist),s.reduceField(s.state.fields.artist)))),null!=s.state.data.origin&&null!=s.state.fields.origin&&(console.log("jaro-winkler origin: "+E()(s.reduceField(s.state.data.origin),s.reduceField(s.state.fields.origin))),console.log("levenshtein origin: "+H()(s.reduceField(s.state.data.origin),s.reduceField(s.state.fields.origin))));var t="title"in s.state.data===!1||E()(s.reduceField(s.state.data.title),s.reduceField(s.state.fields.title))>=.99,e="artist"in s.state.data===!1||E()(s.reduceField(s.state.data.artist),s.reduceField(s.state.fields.artist))>=.99,a="origin"in s.state.data===!1||E()(s.reduceField(s.state.data.origin),s.reduceField(s.state.fields.origin))>=.99,i={artistMatch:e,titleMatch:t,originMatch:a},n=[{field:s.state.data.artist,match:e},{field:s.state.data.title,match:t},{field:s.state.data.origin,match:a}],r={title:"title"in s.state.data===!0?E()(s.reduceField(s.state.data.title),s.reduceField(s.state.fields.title)):0,artist:"artist"in s.state.data===!0?E()(s.reduceField(s.state.data.artist),s.reduceField(s.state.fields.artist)):0,origin:"origin"in s.state.data===!0?E()(s.reduceField(s.state.data.origin),s.reduceField(s.state.fields.origin)):0};s.setState({roundPoints:n.map((function(t){return t.match&&null!=t.field?1:0})).reduce((function(t,e){return t+e})),checked:!0,match:i,distance:r},s.postCheck)},s.postCheck=function(){s.state.match.artistMatch&&s.state.match.titleMatch&&s.state.match.originMatch&&s.setState({modal:!0,visible:!0})},s.reduceField=function(t){return null===t||void 0===t?null:t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")},s.handleChange=function(t){var e=t.target.value,a=s.state.fields;a=Object(o.a)(Object(o.a)({},a),{},Object(S.a)({},t.target.name,e)),s.setState({fields:a})},s.state={visible:!1,data:null,timer:0,answerTimer:0,fields:{title:"",artist:"",origin:""},match:{titleMatch:!1,artistMatch:!1,originMatch:!1},distance:{title:!1,artist:!1,origin:!1},checked:!1,start:!1,ytplayer:null,loading:!1,modal:!1,modalError:!1,points:0,roundPoints:0},s}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(m.a,{children:[Object(s.jsx)(f.a,{as:"h3",children:"Audio"}),Object(s.jsxs)(m.a,{basic:!0,children:[Object(s.jsx)(O.a,{secondary:!0,onClick:function(e){return t.setState({visible:!t.state.visible})},children:"Reveal"}),null===this.state.data&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.prepareNextRound,disabled:this.state.loading,children:"Start"}),null!==this.state.data&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.prepareNextRound,disabled:this.state.loading,children:"Next"}),Object(s.jsxs)(m.a,{pAlign:"center",children:[null!=this.state.data&&Object(s.jsx)(F.a,{progress:"value",indicating:!0,value:this.state.answerTimer,total:this.state.data.answerTime}),this.state.loading&&Object(s.jsx)(z.a,{active:!0}),Object(s.jsx)(m.a,{basic:!0,style:{display:this.state.visible?"block":"none"},children:null!=this.state.data&&Object(s.jsx)(A.a,{name:"ytplayer",videoId:null===this.state.data?"dummy":this.state.data.id,opts:this.opts,onReady:this._onReady,onStateChange:this._onStateChange,style:{position:"absolute",top:"0",zIndex:"10"}})})]}),Object(s.jsxs)(y.a,{children:[Object(s.jsxs)(y.a.Group,{widths:"equal",children:[null!=this.state.data&&null!=this.state.data.title&&Object(s.jsx)(x.a,{trigger:Object(s.jsx)(y.a.Input,{fluid:!0,name:"title",label:"Title",placeholder:"Title",value:this.state.fields.title,onChange:this.handleChange,error:!this.state.match.titleMatch&&this.state.checked,disabled:this.state.match.titleMatch&&this.state.checked}),content:this.state.distance.title>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.title<.99}),null!=this.state.data&&null!=this.state.data.artist&&Object(s.jsx)(x.a,{trigger:Object(s.jsx)(y.a.Input,{fluid:!0,name:"artist",label:"Artist",placeholder:"Artist",value:this.state.fields.artist,onChange:this.handleChange,error:!this.state.match.artistMatch&&this.state.checked,disabled:this.state.match.artistMatch&&this.state.checked}),content:this.state.distance.artist>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.artist<.99}),null!=this.state.data&&null!=this.state.data.origin&&Object(s.jsx)(x.a,{trigger:Object(s.jsx)(y.a.Input,{fluid:!0,name:"origin",label:"Origin",placeholder:"Origin",value:this.state.fields.origin,onChange:this.handleChange,error:!this.state.match.originMatch&&this.state.checked,disabled:this.state.match.originMatch&&this.state.checked}),content:this.state.distance.origin>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.origin<.99})]}),Object(s.jsx)(y.a.Button,{style:{marginTop:"3em"},onClick:this.checkValues,disabled:!this.state.start,children:"Check"})]})]}),Object(s.jsxs)(D.a,{onClose:function(){return t.setState({modal:!1})},onOpen:function(){return t.setState({modal:!0})},open:this.state.modal,children:[Object(s.jsx)(D.a.Header,{children:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"Congratulations":"Time is up !"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsxs)(D.a.Description,{children:[Object(s.jsx)(f.a,{children:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"You have successfully found all the fields for this question !":"Sorry but you have done all the items of this category, try addind some more to keep playing"}),Object(s.jsx)("p",{children:"Here are the expected answers for this item :"}),Object(s.jsxs)(k.a,{divided:!0,relaxed:!0,children:[null!=this.state.data&&null!=this.state.data.title&&Object(s.jsxs)(k.a.Item,{children:[Object(s.jsx)(k.a.Icon,{style:J.iconWidth,name:"itunes note",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{children:"Title"}),Object(s.jsxs)(k.a.Description,{children:[this.state.data.title," ",Object(s.jsxs)("span",{style:J.italic,children:["- Your last answer was : ",this.state.fields.title]})]})]}),this.state.match.titleMatch?Object(s.jsx)(k.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(k.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]}),null!=this.state.data&&null!=this.state.data.artist&&Object(s.jsxs)(k.a.Item,{children:[Object(s.jsx)(k.a.Icon,{style:J.iconWidth,name:"male",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{children:"Artist"}),Object(s.jsxs)(k.a.Description,{children:[this.state.data.artist," ",Object(s.jsxs)("span",{style:J.italic,children:["- Your last answer was : ",this.state.fields.artist]})]})]}),this.state.match.artistMatch?Object(s.jsx)(k.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(k.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]}),null!=this.state.data&&null!=this.state.data.origin&&Object(s.jsxs)(k.a.Item,{children:[Object(s.jsx)(k.a.Icon,{style:J.iconWidth,name:"film",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{children:"Origin"}),Object(s.jsxs)(k.a.Description,{children:[this.state.data.origin," ",Object(s.jsxs)("span",{style:J.italic,children:["- Your last answer was : ",this.state.fields.origin]})]})]}),this.state.match.originMatch?Object(s.jsx)(k.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(k.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]})]}),this.state.roundPoints>0&&Object(s.jsxs)("p",{children:["Your answers on this round granted you ",this.state.roundPoints," ",this.state.roundPoints>1?"points":"point","."]}),0===this.state.roundPoints&&Object(s.jsx)("p",{children:"Your answers on this round did not grant you any points."})]})}),Object(s.jsx)(D.a.Actions,{children:Object(s.jsx)(O.a,{content:"Got it !",labelPosition:"right",icon:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"checkmark":"close",onClick:function(){return t.setState({modal:!1})},positive:!0})})]}),Object(s.jsxs)(D.a,{onClose:function(){return t.setState({modalError:!1})},onOpen:function(){return t.setState({modalError:!0})},open:this.state.modalError,children:[Object(s.jsx)(D.a.Header,{children:"That's all folks"}),Object(s.jsx)(D.a.Content,{children:Object(s.jsx)(D.a.Description,{children:Object(s.jsx)(f.a,{children:"Sorry but you have done all the items of this category, try addind some more to keep playing"})})}),Object(s.jsx)(D.a.Actions,{children:Object(s.jsx)(O.a,{content:"Okay",labelPosition:"right",icon:"close",onClick:function(){return t.setState({modalError:!1})},negative:!0})})]})]})}}]),a}(n.a.Component),J={italic:{fontStyle:"italic"},iconWidth:{width:"10%",textAlign:"center"}},Y=N,L=a(209),V=[{key:"a",text:"Audio",value:"audio"},{key:"v",text:"Video",value:"video"}],W=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).addItem=function(){if(""===s.state.fields.title&&""===s.state.fields.artist&&""===s.state.fields.origin)s.setState({error:!0,errorMsg:"You need to fill at least one of the fields above."});else if(""===s.state.fields.type)s.setState({error:!0,errorMsg:"You need to select a type of item."});else{if(-1!==s.props.allData.allData.map((function(t){return{type:t.type,id:t.id}})).indexOf({type:s.state.fields.type,id:s.state.fields.id}))s.setState({error:!0,errorMsg:"This video is already referenced for this type of item"});else{var t={};""!==s.state.fields.title&&(t.title=s.state.fields.title),""!==s.state.fields.artist&&(t.artist=s.state.fields.artist),""!==s.state.fields.origin&&(t.origin=s.state.fields.origin),t.type=s.state.fields.type,t.id=s.state.fields.id,t.done=!1,t.from=s.state.fields.from,t.time=s.state.fields.to-s.state.fields.from,t.answerTime=s.state.fields.answer,s.props.allData.allData.push(t),s.setState({success:!0})}}},s.importJSON=function(){JSON.parse(s.state.fields.json).forEach((function(t){"id"in t&&("title"in t||"artist"in t||"origin"in t)&&"from"in t&&"time"in t&&t&&(t.done=!1,-1===s.props.allData.allData.map((function(t){return{type:t.type,id:t.id}})).indexOf({type:t.type,id:t.id})&&s.props.allData.allData.push(t))}))},s.handleChange=function(t){var e=t.target.value,a=s.state.fields;a=Object(o.a)(Object(o.a)({},a),{},Object(S.a)({},t.target.name,e)),s.setState({fields:a})},s.handleChangeSelect=function(t,e){var a=s.state.fields;a=Object(o.a)(Object(o.a)({},a),{},Object(S.a)({},e.name,e.value)),s.setState({fields:a})},s.handleClick=function(t,e){var a=e.index,i=s.state.activeIndex===a?-1:a;s.setState({activeIndex:i})},s.state={fields:{id:"",title:"",artist:"",origin:"",type:"",from:0,to:30,answer:30},error:!1,success:!1,errorMsg:"",activeIndex:0},s}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(L.a,{styled:!0,fluid:!0,style:{marginTop:"1rem"},children:[Object(s.jsxs)(L.a.Title,{active:0===this.state.activeIndex,index:0,onClick:this.handleClick,children:[Object(s.jsx)(p.a,{name:"dropdown"}),"Add Item"]}),Object(s.jsx)(L.a.Content,{active:0===this.state.activeIndex,children:Object(s.jsxs)(y.a,{error:this.state.error,success:this.state.success,children:[Object(s.jsxs)(y.a.Group,{widths:"equal",children:[Object(s.jsx)(y.a.Input,{fluid:!0,name:"id",label:"Youtube ID",placeholder:"Ex: MqDWL0MgAtc",value:this.state.fields.id,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{fluid:!0,name:"title",label:"Title",placeholder:"Title",value:this.state.fields.title,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{fluid:!0,name:"artist",label:"Artist",placeholder:"Artist",value:this.state.fields.artist,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{fluid:!0,name:"origin",label:"Origin",placeholder:"Origin",value:this.state.fields.origin,onChange:this.handleChange})]}),Object(s.jsxs)(y.a.Group,{widths:"equal",children:[Object(s.jsx)(y.a.Select,{required:!0,fluid:!0,name:"type",options:V,label:"Type",placeholder:"Type",value:this.state.fields.type,onChange:this.handleChangeSelect}),Object(s.jsx)(y.a.Input,{required:!0,fluid:!0,type:"number",name:"from",label:"Starting From (sec)",placeholder:"0",value:this.state.fields.from,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{required:!0,fluid:!0,type:"number",name:"to",label:"Up to (sec)",placeholder:"30",value:this.state.fields.to,onChange:this.handleChange}),Object(s.jsx)(y.a.Input,{required:!0,fluid:!0,type:"number",name:"answer",label:"Answering Time (sec)",placeholder:"30",value:this.state.fields.answer,onChange:this.handleChange})]}),Object(s.jsx)(w.a,{error:!0,header:"Fields Missing",content:this.state.errorMsg}),Object(s.jsx)(w.a,{success:!0,header:"Sucess",content:"Item added successfully."}),Object(s.jsx)(y.a.Button,{onClick:this.addItem,children:"Add"})]})}),Object(s.jsxs)(L.a.Title,{active:1===this.state.activeIndex,index:1,onClick:this.handleClick,children:[Object(s.jsx)(p.a,{name:"dropdown"}),"Advanced Import"]}),Object(s.jsx)(L.a.Content,{active:1===this.state.activeIndex,children:Object(s.jsxs)(y.a,{error:this.state.error,success:this.state.success,children:[Object(s.jsx)(y.a.TextArea,{name:"json",rows:10,label:"JSON Import",value:this.state.fields.json,onChange:this.handleChange}),Object(s.jsx)(y.a.Button,{onClick:this.importJSON,children:"Import"})]})})]})}}]),a}(n.a.Component),_=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).state={enabled:!1},console.log(s.props.allData),s}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)(m.a,{textAlign:"center",children:Object(s.jsx)(O.a,{style:{fontSize:"10em"},circular:!0,icon:!0,disabled:!this.state.enabled,children:Object(s.jsx)(p.a,{name:"bell"})})})}}]),a}(n.a.Component),q=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(c.a)(this,a),(s=e.call(this,t)).handleOpen=function(){s.setState({gamePopup:!s.state.gamePopup})},s.setUsername=function(t){s.setState({username:t})},s.setGameData=function(t){s.setState({gameData:t})},s.setPlayers=function(t){s.setState({gameData:Object(o.a)(Object(o.a)({},s.state.gameData),{},{players:t})})},s.setMenu=function(t){s.setState({menu:t})},s.sortPlayersByPoints=function(t,e){return t.points>e.points?-1:t.points<e.points?1:0},s.stateHandler={setUsername:s.setUsername,setGameData:s.setGameData,setMenu:s.setMenu,setPlayers:s.setPlayers},s.state={visible:!1,menu:"home",gamePopup:!1,username:""},s}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(j.a.Pushable,{as:m.a,basic:!0,style:{height:"100vh"},children:[Object(s.jsxs)(j.a,{as:b.a,animation:"overlay",icon:"labeled",onHide:function(){return t.setState({visible:!1})},vertical:!0,visible:this.state.visible,width:"thin",children:[Object(s.jsxs)(b.a.Item,{as:"a",onClick:function(e){return t.setState({menu:"home"})},children:[Object(s.jsx)(p.a,{name:"home"}),"Home"]}),Object(s.jsxs)(b.a.Item,{as:"a",onClick:function(e){return t.setState({menu:"audio"})},children:[Object(s.jsx)(p.a,{name:"sound"}),"Audio"]}),Object(s.jsxs)(b.a.Item,{as:"a",onClick:function(e){return t.setState({menu:"video"})},children:[Object(s.jsx)(p.a,{name:"video"}),"Video"]}),Object(s.jsxs)(b.a.Item,{as:"a",onClick:function(e){return t.setState({menu:"items"})},children:[Object(s.jsx)(p.a,{name:"add"}),"Add"]}),Object(s.jsxs)(b.a.Item,{as:"a",onClick:function(e){return t.setState({menu:"buzzer"})},children:[Object(s.jsx)(p.a,{name:"add"}),"Buzzer"]})]}),Object(s.jsxs)(j.a.Pusher,{dimmed:this.state.visible,style:{backgroundColor:"aliceblue"},children:[Object(s.jsxs)(g.a,{basic:!0,children:[Object(s.jsxs)(O.a,{size:"huge",icon:!0,style:{marginTop:"1em"},onClick:function(e){return t.setState({visible:!0})},children:[Object(s.jsx)(p.a,{name:"list"})," Menu"]}),Object(s.jsx)(f.a,{as:"h1",textAlign:"center",style:U.glitchFont,children:"Quizz-O-Tron 3000"}),Object(s.jsx)("p",{style:{textAlign:"center"},children:"The best, the only, the all-in-one blindtest of all time !"}),"home"===this.state.menu&&Object(s.jsx)(P,{game:this.state.gameData,stateHandler:this.stateHandler}),"video"===this.state.menu&&Object(s.jsx)(G,{game:this.state.gameData}),"audio"===this.state.menu&&Object(s.jsx)(Y,{game:this.state.gameData}),"items"===this.state.menu&&Object(s.jsx)(W,{game:this.state.gameData}),"buzzer"===this.state.menu&&Object(s.jsx)(_,{})]}),this.state.gameData&&Object(s.jsx)(x.a,{trigger:Object(s.jsx)(O.a,{icon:!0,onClick:this.handleOpen,style:{position:"absolute",top:"2em",right:"2em"},children:Object(s.jsx)(p.a,{name:"plus"})}),open:this.state.gamePopup,position:"bottom left",flowing:!0,children:Object(s.jsxs)(m.a,{basic:!0,style:{minWidth:"20rem"},children:[Object(s.jsx)(f.a,{as:"h3",children:"Game state"}),Object(s.jsxs)(y.a,{children:[Object(s.jsx)(y.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.gameData.seed,children:[Object(s.jsx)(C.a,{basic:!0,children:"Game seed"}),Object(s.jsx)("input",{})]})}),Object(s.jsx)(y.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.username,children:[Object(s.jsx)(C.a,{basic:!0,children:"Your username"}),Object(s.jsx)("input",{})]})}),this.state.gameData.players[this.state.username]&&Object(s.jsx)(y.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.gameData.players[this.state.username].points,children:[Object(s.jsx)(C.a,{basic:!0,children:"Your points"}),Object(s.jsx)("input",{})]})})]}),Object(s.jsx)("p",{children:"Game Top 3"}),Object(s.jsxs)(k.a,{ordered:!0,divided:!0,relaxed:!0,children:[Object(s.jsx)(k.a.Item,{children:Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[0].name}),Object(s.jsxs)(k.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[0].points," ",1===Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[0].points?"point":"points"]})]})}),Object.keys(this.state.gameData.players).length>1&&Object(s.jsx)(k.a.Item,{children:Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[1].name}),Object(s.jsxs)(k.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[1].points," ",1===Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[1].points?"point":"points"]})]})}),Object.keys(this.state.gameData.players).length>2&&Object(s.jsx)(k.a.Item,{children:Object(s.jsxs)(k.a.Content,{children:[Object(s.jsx)(k.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[2].name}),Object(s.jsxs)(k.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[2].points," ",1===Object.entries(this.state.gameData.players).map((function(t){return t[1].name=t[0],t[1]})).sort(this.sortPlayersByPoints)[2].points?"point":"points"]})]})})]})]})})]})]})}}]),a}(n.a.Component),U={glitchFont:{fontFamily:"Glitch Inside",fontSize:"5em",marginBottom:"0px"}},X=q;var Q=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(X,{})})},K=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,217)).then((function(e){var a=e.getCLS,s=e.getFID,i=e.getFCP,n=e.getLCP,r=e.getTTFB;a(t),s(t),i(t),n(t),r(t)}))};l.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(Q,{})}),document.getElementById("root")),K()}},[[185,1,2]]]);
//# sourceMappingURL=main.51d1224c.chunk.js.map