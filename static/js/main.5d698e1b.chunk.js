(this.webpackJsonpbulindutestu=this.webpackJsonpbulindutestu||[]).push([[0],{166:function(e,t,a){},167:function(e,t,a){},17:function(e,t){e.exports={reduceField:function(e){return null===e||void 0===e?null:e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}}},186:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a(0),i=a.n(n),r=a(63),o=a.n(r),c=(a(166),a(167),a(168),a(32)),l=a(34),d=a(25),h=a(37),m=a(36),u=a(217),j=a(215),p=a(206),g=a(46),b=a(203),O=a(187),f=a(216),y=a(204),x=a(207),v=a(202),C=a(91),I=a(209),S=a(39),k=a(212),w=a(208),T=a(205),D=a(130),P=a(23),A=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).startGame=function(){console.log(P.vars),s.state.username&&""!==s.state.username&&s.state.gameType&&""!==s.state.gameType?(console.log("gotUsername"),s.setState({formError:!1}),fetch(P.vars.api+"game",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({host:s.state.username,gameType:s.state.gameType})}).then((function(e){return e.json()})).then((function(e){if(e.body){var t=JSON.parse(e.body);console.log(t),s.props.stateHandler.setUsername(s.state.username),s.props.stateHandler.setGameData(t),s.setState({waitModal:!0}),s.checkGame()}}),(function(e){console.error(e.message)}))):s.setState({formError:!0})},s.joinGame=function(){console.log("joinGame"),s.state.username&&""!==s.state.username&&s.state.joinGameId&&""!==s.state.joinGameId?(console.log("sending patch"),s.setState({formError:!1}),fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.state.joinGameId,username:s.state.username})}).then((function(e){return e.json()})).then((function(e){if(e.body){var t=JSON.parse(e.body);console.log(t),s.props.stateHandler.setUsername(s.state.username),s.props.stateHandler.setGameData(t),s.setState({waitModal:!0}),s.checkGame()}}),(function(e){console.error(e.message)}))):s.setState({formError:!0})},s.setPlayerStatus=function(e){s.state.username&&""!==s.state.username&&s.props.game.id&&fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.state.username,status:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=JSON.parse(e.body);t.players&&s.props.stateHandler.setPlayers(t.players)}))},s.removePlayer=function(e){s.props.game.id&&fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:e,remove:!0})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=JSON.parse(e.body);t.players&&s.props.stateHandler.setPlayers(t.players)}))},s.checkGame=function(){s.timerCheckGame=setInterval((function(){"00_init"===s.props.game.state&&s.props.game.id?fetch(P.vars.api+"game/"+s.props.game.id,{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=JSON.parse(e.body);t&&(s.props.stateHandler.setGameData(t),s.state.username===t.host&&D.a.countBy(Object.entries(s.props.game.players).map((function(e){return e[1].status})),(function(e){return e})).ready===Object.entries(s.props.game.players).length&&""!==s.state.itemType&&s.setState({launchDisabled:!1}))})):(clearInterval(),"01_host_start"===s.props.game.state&&s.props.stateHandler.setMenu("game"))}),1e3)},s.goToSettings=function(){s.setState({waitModal:!1}),s.props.stateHandler.setMenu("settings")},s.handleChange=function(e){s.setState(Object(S.a)({},e.target.name,e.target.value))},s.closeOnDimmerClickHandle=function(e){s.setState({joinModal:!1})},s.handleDropdownChange=function(e,t){var a=t.value;fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.state.username,itemType:a})}).then((function(e){return e.json()})).then((function(e){if(e.body){var t=JSON.parse(e.body);console.log(t),s.setState({itemType:t.itemType,launchDisabled:D.a.countBy(Object.entries(s.props.game.players).map((function(e){return e[1].status})),(function(e){return e})).ready!==Object.entries(s.props.game.players).length})}}),(function(e){console.error(e.message)}))},s.goToPlayApp=function(){fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.state.username,state:"next"})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),e.body){var t=JSON.parse(e.body);console.log(s.props.game),s.props.stateHandler.setGameState(t.state,(function(){return s.props.stateHandler.setMenu("game")}))}}),(function(e){console.error(e.message)}))},s.state={username:s.props.username?s.props.username:"",gameType:"",itemType:"",usernameError:!1,joinGameId:"",joinModal:!1,waitModal:!(!s.props.game||"00_init"!==s.props.game.state),launchDisabled:!0},s}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(j.a,{children:[Object(s.jsx)(f.a,{as:"h1",textAlign:"center",children:"Welcome to my blind-testing app."}),Object(s.jsxs)("p",{children:["This app is made to let you be in charge of the game. Add your own music, your own clips, set your parameters and enjoy with your friends.",Object(s.jsx)("br",{}),"Choose a game mode with the buttons below :"]}),Object(s.jsxs)(x.a,{size:"massive",error:this.state.formError,style:{width:"100%"},children:[Object(s.jsx)(x.a.Field,{inline:!0,children:Object(s.jsx)(v.a,{fluid:!0,name:"username",label:"Username",value:this.state.username,onChange:this.handleChange})}),Object(s.jsx)(j.a,{basic:!0,textAlign:"center",style:M.noPaddingX,children:Object(s.jsxs)(O.a.Group,{vertical:!0,style:{width:"100%"},children:[Object(s.jsx)(y.a,{content:"Play a solo game and score as much points as you can. Share your seed to challenge your friends on the same items.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:M.homeButtons,active:"solo"===this.state.gameType,size:"massive",onClick:function(t){e.setState({gameType:"solo"})},children:"Solo"})}),Object(s.jsx)(y.a,{content:"Play online with your friends in a private lobby. All player in the lobby will get the same song at the same time.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:M.homeButtons,active:"lobby"===this.state.gameType,size:"massive",onClick:function(t){e.setState({gameType:"lobby"})},children:"Lobby"})}),Object(s.jsx)(y.a,{content:"Play with your friends on the couch. Each player can use its cellphone as a buzzer.",position:"top center",trigger:Object(s.jsx)(O.a,{toggle:!0,style:M.homeButtons,active:"couch"===this.state.gameType,size:"massive",onClick:function(t){e.setState({gameType:"couch"})},children:"Couch"})}),Object(s.jsx)(y.a,{content:"Input a seed to join an existing game.",position:"top center",trigger:Object(s.jsx)(O.a,{style:M.homeButtons,onClick:function(){return e.setState({joinModal:!0})},size:"massive",children:"Join"})})]})}),Object(s.jsx)(x.a.Button,{fluid:!0,size:"massive",style:M.homeButtons,onClick:this.startGame,children:"Let's Go !"}),Object(s.jsx)(k.a,{error:!0,header:"Invalid fields",content:"Please enter a username and select a type of game."})]}),Object(s.jsxs)(w.a,{open:this.state.joinModal,closeOnDimmerClick:!0,onClose:function(){e.setState({joinModal:!1})},children:[Object(s.jsx)(w.a.Header,{children:"Join a game"}),Object(s.jsx)(w.a.Content,{children:Object(s.jsxs)(w.a.Description,{children:[Object(s.jsx)(f.a,{children:"Join an ongoing game with your friends"}),Object(s.jsx)("p",{children:"Enter the id of the game and your username then press the join button"}),Object(s.jsxs)(x.a,{error:this.state.formError,children:[Object(s.jsx)(x.a.Input,{name:"joinGameId",label:"Game ID",value:this.state.joinGameId,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{nmae:"username",label:"Username",value:this.state.username,onChange:this.handleChange})]})]})}),Object(s.jsxs)(w.a.Actions,{children:[Object(s.jsx)(O.a,{color:"black",onClick:function(){return e.setState({joinModal:!1})},children:"Cancel"}),Object(s.jsx)(O.a,{content:"Join",labelPosition:"right",icon:"checkmark",onClick:this.joinGame,positive:!0})]})]}),Object(s.jsxs)(w.a,{open:this.state.waitModal,closeOnDimmerClick:!1,onClose:function(){e.setState({waitModal:!1})},children:[Object(s.jsx)(w.a.Header,{children:"Waiting for players"}),Object(s.jsx)(w.a.Content,{children:Object(s.jsxs)(w.a.Description,{children:[Object(s.jsxs)(f.a,{children:[Object(s.jsx)(g.a,{loading:!0,name:"spinner"})," Waiting for other players to join the game"]}),Object(s.jsxs)(C.a,{as:"a",color:"teal",image:!0,children:[Object(s.jsx)(g.a,{name:"id card outline"}),"Game ID",this.props.game&&Object(s.jsxs)(C.a.Detail,{onClick:function(){navigator.clipboard.writeText(e.props.game.id)},children:[this.props.game.id," (click to copy)"]})]}),this.props.game?Object(s.jsx)(I.a,{children:Object.entries(this.props.game.players).map((function(t){return Object(s.jsxs)(I.a.Item,{children:[Object(s.jsx)(I.a.Icon,{name:t[0]===e.props.game.host?"user secret":"user"}),Object(s.jsxs)(I.a.Content,{children:[t[0]," ","ready"===t[1].status&&Object(s.jsx)(g.a,{color:"green",name:"check"})," ",e.props.game.host===e.state.username&&t[0]!==e.props.game.host&&Object(s.jsx)(g.a,{name:"close",as:"a",onClick:function(){return e.removePlayer(t[0])}})]})]},t[0])}))}):Object(s.jsxs)("p",{children:[Object(s.jsx)(g.a,{loading:!0,name:"spinner"})," Waiting for game data."]})]})}),Object(s.jsx)(w.a.Actions,{children:this.props.game&&(this.props.game.host===this.state.username?Object(s.jsxs)("div",{children:[Object(s.jsx)(T.a,{name:"itemType",error:""===this.state.itemType,placeholder:"Select type of items",selection:!0,style:{float:"left"},options:[{key:"audio",text:"Audio",value:"audio"},{key:"video",text:"Video",value:"video"}],onChange:this.handleDropdownChange}),Object(s.jsx)(O.a,{primary:!0,onClick:this.goToSettings,children:"Settings"}),Object(s.jsx)(O.a,{color:"red",children:"Cancel"}),Object(s.jsx)(O.a,{content:"Launch",positive:!0,onClick:this.goToPlayApp,disabled:this.state.launchDisabled})]}):Object(s.jsxs)("div",{children:[Object(s.jsx)(O.a,{color:"red",onClick:function(){return e.removePlayer(e.state.username)},children:"Leave"}),"ready"!==this.props.game.players[this.state.username].status?Object(s.jsx)(O.a,{content:"Ready",labelPosition:"right",icon:"checkmark",onClick:function(){return e.setPlayerStatus("ready")},positive:!0}):Object(s.jsx)(O.a,{color:"yellow",content:"Hold on",labelPosition:"right",icon:"close",onClick:function(){return e.setPlayerStatus("hold")}})]}))})]})]})}}]),a}(i.a.Component),M={homeButtons:{fontSize:"3rem",lineHeight:"0"},noPaddingX:{paddingLeft:"0",paddingRight:"0"}},H=A,G=a(117),z=a(213),F=a(68),N=a.n(F),B=a(17),J=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).player=null,s.timerCheckGame=null,s.timerPlayGame=null,s.componentDidMount=function(){s.setPlayerStatus("game_loaded"),s.checkGame()},s.setPlayerStatus=function(e){fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.props.username,status:e})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=JSON.parse(e.body);t.players&&s.props.stateHandler.setPlayers(t.players)}))},s.setGameState=function(e,t){fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.props.username,state:e})}).then((function(e){return e.json()})).then((function(e){if(console.log(e),e.body){var a=JSON.parse(e.body);s.props.stateHandler.setGameState(a.state),t&&t()}}),(function(e){console.error(e.message)}))},s.checkGame=function(){var e=setInterval((function(){console.log(s.props.game.state),s.props.game.id&&fetch(P.vars.api+"game/"+s.props.game.id,{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin}}).then((function(e){return e.json()})).then((function(t){var a=JSON.parse(t.body);console.log(a),a&&s.props.stateHandler.setGameData(a),"04_item_start"===a.state&&(clearInterval(e),s.setState({visible:!1,timer:s.props.game.currentItem.time,answerTimer:s.props.game.currentItem.answerTime},(function(){return s.startTimer()})),console.log("letsplay"))}))}),1e3)},s.startItem=function(){s.setGameState("next")},s.startTimer=function(){console.log(s.state.opts),s.player.playVideo(),s.setPlayerStatus("item_running"),s.timerPlayGame=setInterval((function(){s.state.timer<=0&&(console.log("pause video"),s.player.pauseVideo()),s.state.answerTimer<=0?(s.checkValues(),s.endRound()):s.setState({timer:s.state.timer-1,answerTimer:s.state.answerTimer-1})}),1e3)},s.endRound=function(){console.log("endRound"),s.player.pauseVideo(),clearInterval(s.timerPlayGame),s.setState({modal:!0,visible:!0,answerTimer:0,timer:0}),s.setPlayerStatus("item_done"),s.checkGame()},s.getReadyForNext=function(){s.setState({visible:!1,fields:{title:"",artist:"",origin:""},match:{titleMatch:!1,artistMatch:!1,originMatch:!1},distance:{title:0,artist:0,origin:0},checked:!1,modal:!1,modalError:!1,roundPoints:0,answerTimer:0,opts:{width:"100%"},seekDone:!1},(function(){return s.setPlayerStatus("player_ready")}))},s._onReady=function(e){console.log("_onReady"),s.player=e.target,s.setPlayerStatus("player_ready")},s._onStateChange=function(e){switch(console.log("_onStateChange"),console.log("Youtube player state: "+e.data),e.data){case 1:s.state.seekDone||s.setState({seekDone:!0},(function(){return s.player.seekTo(s.props.game.currentItem.from,!0)}))}},s.checkValues=function(){var e="title"in s.props.game.currentItem===!1||N()(Object(B.reduceField)(s.props.game.currentItem.title),Object(B.reduceField)(s.state.fields.title))>=.99,t="artist"in s.props.game.currentItem===!1||N()(Object(B.reduceField)(s.props.game.currentItem.artist),Object(B.reduceField)(s.state.fields.artist))>=.99,a="origin"in s.props.game.currentItem===!1||N()(Object(B.reduceField)(s.props.game.currentItem.origin),Object(B.reduceField)(s.state.fields.origin))>=.99,n={artistMatch:t,titleMatch:e,originMatch:a},i=[{field:s.props.game.currentItem.artist,match:t},{field:s.props.game.currentItem.title,match:e},{field:s.props.game.currentItem.origin,match:a}],r={title:"title"in s.props.game.currentItem===!0?N()(Object(B.reduceField)(s.props.game.currentItem.title),Object(B.reduceField)(s.state.fields.title)):0,artist:"artist"in s.props.game.currentItem===!0?N()(Object(B.reduceField)(s.props.game.currentItem.artist),Object(B.reduceField)(s.state.fields.artist)):0,origin:"origin"in s.props.game.currentItem===!0?N()(Object(B.reduceField)(s.props.game.currentItem.origin),Object(B.reduceField)(s.state.fields.origin)):0};s.setState({roundPoints:i.map((function(e){return e.match&&null!=e.field?1:0})).reduce((function(e,t){return e+t})),checked:!0,match:n,distance:r},s.postCheck)},s.postCheck=function(){s.state.match.artistMatch&&s.state.match.titleMatch&&s.state.match.originMatch&&s.endRound()},s.handleChange=function(e){var t=e.target.value,a=s.state.fields;a=Object(c.a)(Object(c.a)({},a),{},Object(S.a)({},e.target.name,t)),s.setState({fields:a})},s.state={debug:!0,visible:!1,fields:{title:"",artist:"",origin:""},match:{titleMatch:!1,artistMatch:!1,originMatch:!1},distance:{title:0,artist:0,origin:0},checked:!1,modal:!1,modalError:!1,roundPoints:0,answerTimer:0,opts:{width:"100%"},seekDone:!1},s}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(j.a,{children:[Object(s.jsx)(f.a,{as:"h3",children:"Game"}),Object(s.jsxs)(j.a,{basic:!0,children:[this.state.debug&&Object(s.jsx)(O.a,{secondary:!0,onClick:function(t){return e.setState({visible:!e.state.visible})},children:"Reveal"}),"item_done"===this.props.game.players[this.props.username].status&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.getReadyForNext,children:"Ready"}),"03_all_youtube_ready"===this.props.game.state&&this.props.username===this.props.game.host&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.startItem,children:"Start"}),"06_next_item"===this.props.game.state&&this.props.username===this.props.game.host&&Object(s.jsx)(O.a,{secondary:!0,onClick:this.startItem,children:"Next"}),Object(s.jsxs)(j.a,{pAlign:"center",children:[this.props.game.currentItem&&this.props.game.currentItem.id&&Object(s.jsx)(z.a,{progress:"value",indicating:!0,value:this.state.answerTimer,total:this.props.game.currentItem.answerTime}),Object(s.jsx)(j.a,{basic:!0,style:{display:this.state.visible?"block":"none"},children:Object(s.jsx)(G.a,{name:"ytplayer",videoId:null===this.props.game.currentItem?"dummy":this.props.game.currentItem.id,opts:this.state.opts,onReady:this._onReady,onStateChange:this._onStateChange,style:{position:"absolute",top:"0",zIndex:"10"}})})]}),Object(s.jsxs)(x.a,{children:[Object(s.jsxs)(x.a.Group,{widths:"equal",children:[null!=this.props.game.currentItem&&null!=this.props.game.currentItem.title&&Object(s.jsx)(y.a,{trigger:Object(s.jsx)(x.a.Input,{fluid:!0,name:"title",label:"Title",placeholder:"Title",value:this.state.fields.title,onChange:this.handleChange,error:!this.state.match.titleMatch&&this.state.checked,disabled:this.state.match.titleMatch&&this.state.checked}),content:this.state.distance.title>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.title<.99}),null!=this.props.game.currentItem&&null!=this.props.game.currentItem.artist&&Object(s.jsx)(y.a,{trigger:Object(s.jsx)(x.a.Input,{fluid:!0,name:"artist",label:"Artist",placeholder:"Artist",value:this.state.fields.artist,onChange:this.handleChange,error:!this.state.match.artistMatch&&this.state.checked,disabled:this.state.match.artistMatch&&this.state.checked}),content:this.state.distance.artist>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.artist<.99}),null!=this.props.game.currentItem&&null!=this.props.game.currentItem.origin&&Object(s.jsx)(y.a,{trigger:Object(s.jsx)(x.a.Input,{fluid:!0,name:"origin",label:"Origin",placeholder:"Origin",value:this.state.fields.origin,onChange:this.handleChange,error:!this.state.match.originMatch&&this.state.checked,disabled:this.state.match.originMatch&&this.state.checked}),content:this.state.distance.origin>.95?"You are close !":"Try again !",position:"bottom left",open:this.state.checked&&this.state.distance.origin<.99})]}),Object(s.jsx)(x.a.Button,{style:{marginTop:"3em"},onClick:this.checkValues,disabled:this.state.answerTimer<=0,children:"Check"})]})]}),Object(s.jsxs)(w.a,{onClose:function(){return e.setState({modal:!1})},onOpen:function(){return e.setState({modal:!0})},open:this.state.modal,children:[Object(s.jsx)(w.a.Header,{children:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"Congratulations":"Time is up !"}),Object(s.jsx)(w.a.Content,{children:Object(s.jsxs)(w.a.Description,{children:[Object(s.jsx)(f.a,{children:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"You have successfully found all the fields for this question !":"Sorry but you have done all the items of this category, try addind some more to keep playing"}),Object(s.jsx)("p",{children:"Here are the expected answers for this item :"}),Object(s.jsxs)(I.a,{divided:!0,relaxed:!0,children:[null!=this.props.game.currentItem&&null!=this.props.game.currentItem.title&&Object(s.jsxs)(I.a.Item,{children:[Object(s.jsx)(I.a.Icon,{style:_.iconWidth,name:"itunes note",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{children:"Title"}),Object(s.jsxs)(I.a.Description,{children:[this.props.game.currentItem.title," ",Object(s.jsxs)("span",{style:_.italic,children:["- Your last answer was : ",this.state.fields.title]})]})]}),this.state.match.titleMatch?Object(s.jsx)(I.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(I.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]}),null!=this.props.game.currentItem&&null!=this.props.game.currentItem.artist&&Object(s.jsxs)(I.a.Item,{children:[Object(s.jsx)(I.a.Icon,{style:_.iconWidth,name:"male",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{children:"Artist"}),Object(s.jsxs)(I.a.Description,{children:[this.props.game.currentItem.artist," ",Object(s.jsxs)("span",{style:_.italic,children:["- Your last answer was : ",this.state.fields.artist]})]})]}),this.state.match.artistMatch?Object(s.jsx)(I.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(I.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]}),null!=this.props.game.currentItem&&null!=this.props.game.currentItem.origin&&Object(s.jsxs)(I.a.Item,{children:[Object(s.jsx)(I.a.Icon,{style:_.iconWidth,name:"film",size:"large",verticalAlign:"middle"}),Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{children:"Origin"}),Object(s.jsxs)(I.a.Description,{children:[this.props.game.currentItem.origin," ",Object(s.jsxs)("span",{style:_.italic,children:["- Your last answer was : ",this.state.fields.origin]})]})]}),this.state.match.originMatch?Object(s.jsx)(I.a.Icon,{color:"green",name:"check",size:"large",verticalAlign:"middle"}):Object(s.jsx)(I.a.Icon,{color:"red",name:"close",size:"large",verticalAlign:"middle"})]})]}),this.state.roundPoints>0&&Object(s.jsxs)("p",{children:["Your answers on this round granted you ",this.state.roundPoints," ",this.state.roundPoints>1?"points":"point","."]}),0===this.state.roundPoints&&Object(s.jsx)("p",{children:"Your answers on this round did not grant you any points."})]})}),Object(s.jsx)(w.a.Actions,{children:Object(s.jsx)(O.a,{content:"Got it !",labelPosition:"right",icon:this.state.match.artistMatch&&this.state.match.titleMatch&&this.state.match.originMatch?"checkmark":"close",onClick:function(){return e.setState({modal:!1})},positive:!0})})]}),Object(s.jsxs)(w.a,{onClose:function(){return e.setState({modalError:!1})},onOpen:function(){return e.setState({modalError:!0})},open:this.state.modalError,children:[Object(s.jsx)(w.a.Header,{children:"That's all folks"}),Object(s.jsx)(w.a.Content,{children:Object(s.jsx)(w.a.Description,{children:Object(s.jsx)(f.a,{children:"Sorry but you have done all the items of this category, try addind some more to keep playing"})})}),Object(s.jsx)(w.a.Actions,{children:Object(s.jsx)(O.a,{content:"Okay",labelPosition:"right",icon:"close",onClick:function(){return e.setState({modalError:!1})},negative:!0})})]})]})}}]),a}(i.a.Component),_={italic:{fontStyle:"italic"},iconWidth:{width:"10%",textAlign:"center"}},E=J,R=a(211),Y=[{key:"a",text:"Audio",value:"audio"},{key:"v",text:"Video",value:"video"}],W=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).addItem=function(){if(""===s.state.fields.title&&""===s.state.fields.artist&&""===s.state.fields.origin)s.setState({error:!0,errorMsg:"You need to fill at least one of the fields above."});else if(""===s.state.fields.type)s.setState({error:!0,errorMsg:"You need to select a type of item."});else{if(-1!==s.props.allData.allData.map((function(e){return{type:e.type,id:e.id}})).indexOf({type:s.state.fields.type,id:s.state.fields.id}))s.setState({error:!0,errorMsg:"This video is already referenced for this type of item"});else{var e={};""!==s.state.fields.title&&(e.title=s.state.fields.title),""!==s.state.fields.artist&&(e.artist=s.state.fields.artist),""!==s.state.fields.origin&&(e.origin=s.state.fields.origin),e.type=s.state.fields.type,e.id=s.state.fields.id,e.done=!1,e.from=s.state.fields.from,e.time=s.state.fields.to-s.state.fields.from,e.answerTime=s.state.fields.answer,s.props.allData.allData.push(e),s.setState({success:!0})}}},s.importJSON=function(){JSON.parse(s.state.fields.json).forEach((function(e){"id"in e&&("title"in e||"artist"in e||"origin"in e)&&"from"in e&&"time"in e&&e&&(e.done=!1,-1===s.props.allData.allData.map((function(e){return{type:e.type,id:e.id}})).indexOf({type:e.type,id:e.id})&&s.props.allData.allData.push(e))}))},s.handleChange=function(e){var t=e.target.value,a=s.state.fields;a=Object(c.a)(Object(c.a)({},a),{},Object(S.a)({},e.target.name,t)),s.setState({fields:a})},s.handleChangeSelect=function(e,t){var a=s.state.fields;a=Object(c.a)(Object(c.a)({},a),{},Object(S.a)({},t.name,t.value)),s.setState({fields:a})},s.handleClick=function(e,t){var a=t.index,n=s.state.activeIndex===a?-1:a;s.setState({activeIndex:n})},s.state={fields:{id:"",title:"",artist:"",origin:"",type:"",from:0,to:30,answer:30},error:!1,success:!1,errorMsg:"",activeIndex:0},s}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(R.a,{styled:!0,fluid:!0,style:{marginTop:"1rem"},children:[Object(s.jsxs)(R.a.Title,{active:0===this.state.activeIndex,index:0,onClick:this.handleClick,children:[Object(s.jsx)(g.a,{name:"dropdown"}),"Add Item"]}),Object(s.jsx)(R.a.Content,{active:0===this.state.activeIndex,children:Object(s.jsxs)(x.a,{error:this.state.error,success:this.state.success,children:[Object(s.jsxs)(x.a.Group,{widths:"equal",children:[Object(s.jsx)(x.a.Input,{fluid:!0,name:"id",label:"Youtube ID",placeholder:"Ex: MqDWL0MgAtc",value:this.state.fields.id,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{fluid:!0,name:"title",label:"Title",placeholder:"Title",value:this.state.fields.title,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{fluid:!0,name:"artist",label:"Artist",placeholder:"Artist",value:this.state.fields.artist,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{fluid:!0,name:"origin",label:"Origin",placeholder:"Origin",value:this.state.fields.origin,onChange:this.handleChange})]}),Object(s.jsxs)(x.a.Group,{widths:"equal",children:[Object(s.jsx)(x.a.Select,{required:!0,fluid:!0,name:"type",options:Y,label:"Type",placeholder:"Type",value:this.state.fields.type,onChange:this.handleChangeSelect}),Object(s.jsx)(x.a.Input,{required:!0,fluid:!0,type:"number",name:"from",label:"Starting From (sec)",placeholder:"0",value:this.state.fields.from,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{required:!0,fluid:!0,type:"number",name:"to",label:"Up to (sec)",placeholder:"30",value:this.state.fields.to,onChange:this.handleChange}),Object(s.jsx)(x.a.Input,{required:!0,fluid:!0,type:"number",name:"answer",label:"Answering Time (sec)",placeholder:"30",value:this.state.fields.answer,onChange:this.handleChange})]}),Object(s.jsx)(k.a,{error:!0,header:"Fields Missing",content:this.state.errorMsg}),Object(s.jsx)(k.a,{success:!0,header:"Sucess",content:"Item added successfully."}),Object(s.jsx)(x.a.Button,{onClick:this.addItem,children:"Add"})]})}),Object(s.jsxs)(R.a.Title,{active:1===this.state.activeIndex,index:1,onClick:this.handleClick,children:[Object(s.jsx)(g.a,{name:"dropdown"}),"Advanced Import"]}),Object(s.jsx)(R.a.Content,{active:1===this.state.activeIndex,children:Object(s.jsxs)(x.a,{error:this.state.error,success:this.state.success,children:[Object(s.jsx)(x.a.TextArea,{name:"json",rows:10,label:"JSON Import",value:this.state.fields.json,onChange:this.handleChange}),Object(s.jsx)(x.a.Button,{onClick:this.importJSON,children:"Import"})]})})]})}}]),a}(i.a.Component),V=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={enabled:!1},console.log(s.props.allData),s}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)(j.a,{textAlign:"center",children:Object(s.jsx)(O.a,{style:{fontSize:"10em"},circular:!0,icon:!0,disabled:!this.state.enabled,children:Object(s.jsx)(g.a,{name:"bell"})})})}}]),a}(i.a.Component),L=a(210),q=a(219),U=a(148),X=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).ytbPlayer=null,s.clickPreview=function(e){s.setState({modalItem:e,previewModal:!0})},s.handleCheckbox=function(e){var t=s.state.items;t[e].active=!t[e].active,s.setState({items:t})},s._onReady=function(e){console.log(s.state.modalItem),s.ytbPlayer=e.target,s.setState({opts:{playerVars:{start:s.state.modalItem.from,end:s.state.modalItem.from+s.state.modalItem.time}}})},s.handleChange=function(e){console.log(e.target.name),s.setState(Object(S.a)({},e.target.name,e.target.value))},s.getItemsByType=function(e){fetch(P.vars.api+"item/?itemType="+e,{method:"GET",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=JSON.parse(e.body);t&&s.setState({items:t.map((function(e){return e.active=!0,e}))})}))},s.setCustomItems=function(){var e=[];s.state.items.forEach((function(t){t.active&&e.push(t)})),e.length<s.state.items.length&&fetch(P.vars.api+"game",{method:"PATCH",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json",origin:window.location.origin},body:JSON.stringify({gameId:s.props.game.id,username:s.props.username,customItems:e,itemType:s.state.menu})}).then((function(e){return e.json()})).then((function(e){if(e.body){var t=JSON.parse(e.body);console.log(t)}}),(function(e){console.error(e.message)}))},s.filteredItems=function(e){return e.filter((function(e){return e.title&&Object(B.reduceField)(e.title).includes(Object(B.reduceField)(s.state.filter))||e.artist&&Object(B.reduceField)(e.artist).includes(Object(B.reduceField)(s.state.filter))||e.origin&&Object(B.reduceField)(e.origin).includes(Object(B.reduceField)(s.state.filter))}))},s.state={menu:"audio",filter:"",page:1,pageSize:10,opts:{playerVars:{start:0,end:30}}},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getItemsByType(this.state.menu)}},{key:"render",value:function(){var e=this;return Object(s.jsxs)(j.a,{textAlign:"center",children:[Object(s.jsxs)(p.a,{attached:"top",tabular:!0,children:[Object(s.jsx)(p.a.Item,{name:"audio",active:"audio"===this.state.menu,onClick:function(){return e.setState({menu:"audio"},e.getItemsByType("audio"))}}),Object(s.jsx)(p.a.Item,{name:"video",active:"video"===this.state.menu,onClick:function(){return e.setState({menu:"video"},e.getItemsByType("video"))}}),Object(s.jsx)(p.a.Menu,{position:"right",children:Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(v.a,{transparent:!0,name:"filter",icon:{name:"search",link:!0},placeholder:"Search items...",value:this.state.filter,onChange:this.handleChange})})})]}),Object(s.jsxs)(L.a,{celled:!0,children:[Object(s.jsx)(L.a.Header,{children:Object(s.jsxs)(L.a.Row,{children:[Object(s.jsx)(L.a.HeaderCell,{}),Object(s.jsx)(L.a.HeaderCell,{}),Object(s.jsx)(L.a.HeaderCell,{children:"Title"}),Object(s.jsx)(L.a.HeaderCell,{children:"Artist"}),Object(s.jsx)(L.a.HeaderCell,{children:"Origin"}),Object(s.jsx)(L.a.HeaderCell,{children:"From"}),Object(s.jsx)(L.a.HeaderCell,{children:"Time"}),Object(s.jsx)(L.a.HeaderCell,{children:"Answer Time"})]})}),Object(s.jsx)(L.a.Body,{children:this.state.items&&this.filteredItems(this.state.items).slice((this.state.page-1)*this.state.pageSize,this.state.page*this.state.pageSize-1).map((function(t,a){return Object(s.jsxs)(L.a.Row,{children:[Object(s.jsx)(L.a.Cell,{collapsing:!0,children:Object(s.jsx)(q.a,{slider:!0,checked:e.state.items[a].active,onChange:function(){return e.handleCheckbox(a)}})}),Object(s.jsx)(L.a.Cell,{children:Object(s.jsx)(U.a,{size:"tiny",src:"https://img.youtube.com/vi/".concat(t.id,"/0.jpg"),onClick:function(){return e.clickPreview(t)}})}),Object(s.jsx)(L.a.Cell,{children:t.title?t.title:""}),Object(s.jsx)(L.a.Cell,{children:t.artist?t.artist:""}),Object(s.jsx)(L.a.Cell,{children:t.origin?t.origin:""}),Object(s.jsx)(L.a.Cell,{children:t.from?t.from:0}),Object(s.jsx)(L.a.Cell,{children:t.time?t.time:0}),Object(s.jsx)(L.a.Cell,{children:t.answerTime?t.answerTime:0})]},t.id)}))}),Object(s.jsx)(L.a.Footer,{children:Object(s.jsxs)(L.a.Row,{children:[Object(s.jsx)(L.a.HeaderCell,{colSpan:"7",children:Object(s.jsxs)(p.a,{floated:"right",pagination:!0,children:[Object(s.jsx)(p.a.Item,{icon:!0,onClick:function(){e.state.page>1&&e.setState({page:e.state.page-1})},children:Object(s.jsx)(g.a,{name:"chevron left"})},"down"),this.state.items&&new Array(Math.floor(this.filteredItems(this.state.items).length/this.state.pageSize)+1).fill(0).map((function(t,a){return Object(s.jsx)(p.a.Item,{active:e.state.page===a+1,onClick:function(){return e.setState({page:a+1})},children:a+1},a+1)})),Object(s.jsx)(p.a.Item,{icon:!0,onClick:function(){e.state.page<1+new Array(Math.floor(e.filteredItems(e.state.items).length/e.state.pageSize)).fill(0).length&&e.setState({page:e.state.page+1})},children:Object(s.jsx)(g.a,{name:"chevron right"})},"up")]})}),Object(s.jsx)(L.a.HeaderCell,{colSpan:"1",children:Object(s.jsx)(O.a,{fluid:!0,primary:!0,onClick:this.setCustomItems,children:"Apply"})})]})})]}),Object(s.jsxs)(w.a,{onClose:function(){return e.setState({previewModal:!1})},open:this.state.previewModal,children:[Object(s.jsx)(w.a.Header,{children:"Preview Item"}),this.state.modalItem&&Object(s.jsx)(w.a.Content,{children:Object(s.jsx)(w.a.Description,{children:Object(s.jsxs)(b.a,{textAlign:"center",children:[this.state.modalItem.title&&Object(s.jsxs)(C.a,{color:"blue",children:["Title",Object(s.jsx)(C.a.Detail,{children:this.state.modalItem.title})]}),this.state.modalItem.artist&&Object(s.jsxs)(C.a,{color:"green",children:["Artist",Object(s.jsx)(C.a.Detail,{children:this.state.modalItem.artist})]}),this.state.modalItem.origin&&Object(s.jsxs)(C.a,{color:"red",children:["Origin",Object(s.jsx)(C.a.Detail,{children:this.state.modalItem.origin})]}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)(G.a,{name:"ytplayer_settings",videoId:this.state.modalItem.id,onReady:this._onReady,opts:this.state.opts})]})})})]})]})}}]),a}(i.a.Component),Q=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleOpen=function(){s.setState({gamePopup:!s.state.gamePopup})},s.setUsername=function(e){s.setState({username:e})},s.setGameData=function(e){s.setState({gameData:e})},s.setPlayers=function(e){s.setState({gameData:Object(c.a)(Object(c.a)({},s.state.gameData),{},{players:e})})},s.setGameState=function(e,t){s.setState({gameData:Object(c.a)(Object(c.a)({},s.state.gameData),{},{state:e})},t)},s.setMenu=function(e){s.setState({menu:e})},s.setVisible=function(){console.log(s.state.visible),s.setState({visible:!0})},s.handleOnHide=function(e,t){console.log("handle on hide"),console.log(e),console.log(t),e.target.classList.contains("NoClose")||s.setState({visible:!s.state.visible})},s.sortPlayersByPoints=function(e,t){return e.points>t.points?-1:e.points<t.points?1:0},s.stateHandler={setUsername:s.setUsername,setGameData:s.setGameData,setMenu:s.setMenu,setPlayers:s.setPlayers,setGameState:s.setGameState},s.state={visible:!1,menu:"home",gamePopup:!1,username:""},s}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(u.a.Pushable,{as:j.a,basic:!0,style:{height:"100vh"},children:[Object(s.jsxs)(u.a,{as:p.a,animation:"overlay",icon:"labeled",onHide:this.handleOnHide,vertical:!0,visible:this.state.visible,width:"thin",children:[Object(s.jsxs)(p.a.Item,{as:"a",onClick:function(t){return e.setState({menu:"home"})},children:[Object(s.jsx)(g.a,{name:"home"}),"Home"]}),this.state.gameData&&Object(s.jsxs)(p.a.Item,{as:"a",onClick:function(t){return e.setState({menu:"game"})},children:[Object(s.jsx)(g.a,{name:"sound"}),"Audio"]}),this.state.gameData&&Object(s.jsxs)(p.a.Item,{as:"a",onClick:function(t){return e.setState({menu:"buzzer"})},children:[Object(s.jsx)(g.a,{name:"bell"}),"Buzzer"]}),this.state.gameData&&Object(s.jsxs)(p.a.Item,{as:"a",onClick:function(t){return e.setState({menu:"items"})},children:[Object(s.jsx)(g.a,{name:"add"}),"Add"]}),Object(s.jsxs)(p.a.Item,{as:"a",onClick:function(t){return e.setState({menu:"settings"})},children:[Object(s.jsx)(g.a,{name:"settings"}),"Settings"]})]}),Object(s.jsxs)(u.a.Pusher,{dimmed:this.state.visible,style:{backgroundColor:"aliceblue"},children:[Object(s.jsxs)(b.a,{children:[Object(s.jsxs)(O.a,{size:"huge",className:"NoClose",icon:!0,style:{marginTop:"1em"},onClick:this.setVisible,children:[Object(s.jsx)(g.a,{className:"NoClose",name:"list"})," Menu"]}),Object(s.jsx)(f.a,{as:"h1",textAlign:"center",style:K.glitchFont,children:"Quizz-O-Tron 3000"}),Object(s.jsx)("p",{style:{textAlign:"center"},children:"The best, the only, the all-in-one blindtest of all time !"}),"home"===this.state.menu&&Object(s.jsx)(H,{game:this.state.gameData,username:this.state.username,stateHandler:this.stateHandler}),this.state.gameData&&"game"===this.state.menu&&Object(s.jsx)(E,{game:this.state.gameData,username:this.state.username,stateHandler:this.stateHandler}),this.state.gameData&&"buzzer"===this.state.menu&&Object(s.jsx)(V,{game:this.state.gameData}),this.state.gameData&&"items"===this.state.menu&&Object(s.jsx)(W,{game:this.state.gameData}),this.state.gameData&&"settings"===this.state.menu&&Object(s.jsx)(X,{game:this.state.gameData,username:this.state.username})]}),this.state.gameData&&Object(s.jsx)(y.a,{trigger:Object(s.jsx)(O.a,{icon:!0,onClick:this.handleOpen,style:{position:"absolute",top:"2em",right:"2em"},children:Object(s.jsx)(g.a,{name:"plus"})}),open:this.state.gamePopup,position:"bottom left",flowing:!0,children:this.state.gameData&&Object(s.jsxs)(j.a,{basic:!0,style:{minWidth:"20rem"},children:[Object(s.jsx)(f.a,{as:"h3",children:"Game state"}),Object(s.jsxs)(x.a,{children:[Object(s.jsx)(x.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.gameData.seed,children:[Object(s.jsx)(C.a,{basic:!0,children:"Game seed"}),Object(s.jsx)("input",{})]})}),Object(s.jsx)(x.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.username,children:[Object(s.jsx)(C.a,{basic:!0,children:"Your username"}),Object(s.jsx)("input",{})]})}),this.state.gameData.players&&this.state.gameData.players[this.state.username]&&Object(s.jsx)(x.a.Field,{children:Object(s.jsxs)(v.a,{fluid:!0,value:this.state.gameData.players[this.state.username].points,children:[Object(s.jsx)(C.a,{basic:!0,children:"Your points"}),Object(s.jsx)("input",{})]})})]}),Object(s.jsx)("p",{children:"Game Top 3"}),Object(s.jsxs)(I.a,{ordered:!0,divided:!0,relaxed:!0,children:[Object(s.jsx)(I.a.Item,{children:Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[0].name}),Object(s.jsxs)(I.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[0].points," ",1===Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[0].points?"point":"points"]})]})},"first"),Object.keys(this.state.gameData.players).length>1&&Object(s.jsx)(I.a.Item,{children:Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[1].name}),Object(s.jsxs)(I.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[1].points," ",1===Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[1].points?"point":"points"]})]})},"second"),Object.keys(this.state.gameData.players).length>2&&Object(s.jsx)(I.a.Item,{children:Object(s.jsxs)(I.a.Content,{children:[Object(s.jsx)(I.a.Header,{as:"a",children:Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[2].name}),Object(s.jsxs)(I.a.Description,{as:"a",children:["With ",Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[2].points," ",1===Object.entries(this.state.gameData.players).map((function(e){return e[1].name=e[0],e[1]})).sort(this.sortPlayersByPoints)[2].points?"point":"points"]})]})},"third")]})]})})]})]})}}]),a}(i.a.Component),K={glitchFont:{fontFamily:"Glitch Inside",fontSize:"5em",marginBottom:"0px"}},Z=Q;var $=function(){return console.log("v0.0.1"),Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(Z,{})})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,220)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))};o.a.render(Object(s.jsx)(i.a.StrictMode,{children:Object(s.jsx)($,{})}),document.getElementById("root")),ee()},23:function(e,t){e.exports={vars:{api:"https://elsimtc569.execute-api.eu-west-3.amazonaws.com/dev/"}}}},[[186,1,2]]]);
//# sourceMappingURL=main.5d698e1b.chunk.js.map